(function(m){var w=window.AmazonUIPageJS||window.P,p=w._namespace||w.attributeErrors,e=p?p("DetailPageTwisterViewAsset",""):w;e.guardFatal?e.guardFatal(m)(e,window):e.execute(function(){m(e,window)})})(function(m,w,p){m.when("A","dp-refresh-handler","view-util","twister-string-constants","dp-interactive-page-refresh-handler","twister-dimension-subview-promise-handler","page-refresh-custom-params-handler").register("page-refresh-view",function(e,I,r,g,v,q,A){function x(q,d,x){function z(b){return{chunk:function(c){var b=
c.ASIN,l=c.Value;c=c.FeatureName;if(!h.hiddenFeatures[c]){var a=c,f,d;try{a&&l&&l.content&&(d=l.content[a],"undefined"!==typeof d&&(f=t("#"+a),f.html(d),f.removeClass("js-feature-refresh-overlay"),f.css({opacity:""})))}catch(k){a=a||"NoFeatureName",D.logFatal(k,{message:"Error in feature"+a})}h.twisterRefreshHandler.stampFeature(a,b);"twister-slot-price_feature_div"==c&&(b=l?l.content:null,f=t(".swatchSelect .twisterSwatchPrice").html(),l=t(".swatchSelect .price_slot_ppu").html(),f&&b&&b.priceToSet&&
(f=e.trim(f),b.priceToSet!==f&&(t(".swatchSelect .twisterSwatchPrice").html(b.priceToSet),B("twisterUpdatePriceMismatch"))),l&&b&&b.hasPricePerUnit&&b.pricePerUnitDisplay&&(l=e.trim(l),b.pricePerUnitDisplay!==l&&(t(".swatchSelect .price_slot_ppu").html(b.pricePerUnitDisplay),B("twisterUpdatePricePerUnitMismatch"))))}},success:function(b,n,l){B("twisterUpdateSuccess");v.updateRenderTime()},error:function(b,n,l){Twister.$("#variations-overlay").hide();B("twisterUpdateFailure");Twister.showErrorMessageOnFailure&&
(alert(Twister.errorMessageOnFailure),location.reload())},abort:function(b){D.logFatal("Ajax aborted: "+b)},timeout:4E4}}function y(b,c,n,l,a){var f=[];"parent"===b?(c=E(c,l,"parent",a),f.parent=c,c=E(n,l,"partial",a),f.partial=c):(c=E(n,l,b,a),f[b]=c);return f}function k(b,c,n,l,a){for(var f in b)if(b.hasOwnProperty(f)){if("full"===f){var d=n.dimensionType,k=h.twisterUtil.getDimensionInfo().length,g=n.dimensionDisplayType,r=n.newAsin,z=a&&(e.state("dp-twister-csm")||{}).updateCSMPageTypeId;h.twisterRefreshHandler.startMeasurement(r,
d,k,g,z?r:p,z?["is-twister","parentAsin-"+F]:p)}d=b[f].twisterRefreshParams;k=b[f].notifyClientParams;a&&(g=h.config[f].affectedFeatures,t(g).addClass("js-feature-refresh-overlay"),t(g).css({opacity:.5}),h.twisterRefreshHandler.doPageRefresh(null,d,c,l));u(k.asin,k.id,f,a)}}function L(){t.each(d.contextMetaData,function(b,c){var n={};c=c.elementList||[];var l=c.length,a=[];n.click={};n.mouseOver={};for(var f=0;f<l;f++){var d=t("#"+c[f].divToUpdate);a.push("#"+c[f].divToUpdate);d.length&&c[f].customClientFunction&&
(c[f].updateOnHover&&(n.mouseOver[c[f].divToUpdate]=d.attr("customfunctionname")),n.click[c[f].divToUpdate]=d.attr("customfunctionname"))}h.config[b].affectedFeatures=a.join(",");h.config[b].clientFeatures=n})}function u(b,c,n,l){var a="",a=l?g.EVENT_TYPE_CLICK:g.EVENT_TYPE_MOUSEOVER;t.each(h.config[n].clientFeatures[a],function(a,l){try{var n=function(){h.twisterRefreshHandler.stampImageLoad(b)};(function(){var a={};a.P=m;(function(){eval("var P \x3d this.P;");eval("0, "+l)(c,DetailPage.StateController,
n)}).call(a)})()}catch(d){D.logFatal("Client feature - "+a+", threw and exception :- "+d)}})}function E(b,c,n,l){var a={},d={};a.asinList=b;a.id="parent"===n?b:"partial"===l?c:b;a.mType=n;a=M(n,a);n=!1;(l=e.state("pwState"))&&(n=l.isTryState);n&&(a.isTryState=n);N(a,A.getCustomPageRefreshParams(b)||{});a=h.twisterRefreshHandler.createCustomParamsMap({},a);d.asin=b;d.id=c;return{twisterRefreshParams:a,notifyClientParams:d}}function N(b,c){e.each(c,function(c,d){b[d]=c})}function M(b,c){t.each(d.contextMetaData[b].mTypeSpecificURLParams,
function(b,d){c[b]=d});return c}function O(b){b=h.twisterUtil.getSelectionInfoFromSelectedVariationValuesMap(b.selected_variation_values);h.twisterUtil.isFullySelected(b)?h.currentPageSelectionState="full":h.currentPageSelectionState="partial"}function P(b){var c={};c.config=b.measurement;c.dimensionDisplayType=b.dimensionsDisplayType;c.storeID=b.storeID;c.productGroupID=b.productGroupID;return c}function Q(b){b=b.immutableURLPrefix;var c=null;b&&-1!=b.indexOf("?")&&(b=b.split("?")[1],0<b.length&&
(c={},b=b.split("\x26"),e.each(b,function(b){b=b.split("\x3d");c[b[0]]=b[1]})),c.isFlushing=2,c.dpEnvironment=Twister.dpEnvironment);return c}function G(b,c){var d;"partial"===b&&"partial"===c&&(d="partial");"partial"===b&&"full"===c&&(d="full");"full"===b&&"partial"===c&&(d="parent");"full"===b&&"full"===c&&(d="full");return d}var h=this,F=d.parent_asin,C=w.ue,H="",D=new x("dpTwisterPageRefreshView");this.twisterUtil=q.util;this.twisterFeatureName="Twister";this.currentPageSelectionState;this.twisterRefreshHandler;
this.config={partial:{},full:{},parent:{},master:{}};this.hiddenFeatures={intermediateEOS:1,EOS:1};h.viewUtil=new r(q);h.subType;var B=function(b){C&&C.count&&C.count(b,(C.count(b)||0)+1)};(function(){O(d);L();var b={featureName:h.twisterFeatureName},c=P(d);h.twisterRefreshHandler=new I(b,null,c);b=Q(d.twisterUpdateURLInfo);h.twisterRefreshHandler.addParams(b);A.initialize();q.registerPassive({viewAttribution:"DetailPage",viewName:"WebTwisterRefreshView"},{updateView:function(b,c){var a={};if(b!==
g.METADATA){var a={},f;f=p;if(c)switch(b){case g.VARIATION_CHANGE:f=c.selected().selInfo;break;case g.VARIATION_PEEK:f=c.peek().selInfo}a.selectionInfo=f;a.dimensionCombination=h.viewUtil.getCurrDimCombId(a.selectionInfo,"_","X");f=h.twisterUtil.isFullySelected(a.dimensionCombination);a.childAsin=h.twisterUtil.getAsinFromSelectionInfo(a.selectionInfo,f);a.newPageSelectionState=f?"full":"partial";a.mTypeForRefresh=G(h.currentPageSelectionState,a.newPageSelectionState);a.newAsin="parent"===a.mTypeForRefresh?
F:a.childAsin;a.doNotAbort="parent"===a.mTypeForRefresh?!0:!1;a.twisterCallListParams=y(a.mTypeForRefresh,a.newAsin,a.childAsin,a.dimensionCombination,a.newPageSelectionState);a.optionsForTwisterRefresh=z(c);a.pageRefreshMeasure={newAsin:a.newAsin,dimensionType:H,dimensionDisplayType:d.dimensionsDisplayType}}switch(b){case g.VARIATION_CHANGE:h.subType!==g.PRODUCTIZED_VIEW_SUBTYPE&&(k(a.twisterCallListParams,a.optionsForTwisterRefresh,a.pageRefreshMeasure,a.doNotAbort,!0),h.currentPageSelectionState=
a.newPageSelectionState,h.subType=p);break;case g.METADATA:switch(c.subType){case g.DP_STATE_VIEW_SUBTYPE:H=c.divMetadata.dimDisplayType;break;case g.PRODUCTIZED_VIEW_SUBTYPE:h.subType=c.subType,a.dimensionCombination=c.newDimCombID,a.childAsin=c.childAsin,a.newAsin=c.newAsin,a.newPageSelectionState=h.twisterUtil.isFullySelected(a.dimensionCombination)?"full":"partial",a.mTypeForRefresh=G(h.currentPageSelectionState,a.newPageSelectionState),a.doNotAbort="parent"===a.mTypeForRefresh?!0:!1,a.twisterCallListParams=
y(a.mTypeForRefresh,a.newAsin,a.childAsin,a.dimensionCombination,a.newPageSelectionState),a.optionsForTwisterRefresh=z(c),a.pageRefreshMeasure={newAsin:a.newAsin,dimensionType:c.divMetaData?c.divMetaData.dimDisplayType:p,dimensionDisplayType:d.dimensionsDisplayType},k(a.twisterCallListParams,a.optionsForTwisterRefresh,a.pageRefreshMeasure,a.doNotAbort,!0),h.currentPageSelectionState=a.newPageSelectionState}}}})})()}var t=e.$;q.registerDimensionSubView("page-refresh-view",x);return x});m.when("A").register("twister-common-constants",
function(e){return{FAMILY_SIZE_BUCKET_LIMITS:[0,3,8,25,50,100,1E3,5E3],DEFAULT_SELECTION_TAG:"defaultSelection",BottomSheet:{TRIGGERING_CRITERION_BOTTOMSHEET_OPEN:"onBottomsheetOpen",BOTTOM_SHEET_SELECTOR:"#twister_bottom_sheet",OVERFLOW_THRESHOLD:8,BOTTOM_SHEET_INIT_TIME:"dpBottomSheetInitTime",PREFETCH_AJAX_CALLS_COMPLETED_EVENT:"prefetchAjaxCallsCompleted"},SortingFiltering:{PRICE_SORT_TOGGLE_SWITCH_CLICK_ON_METRIC:"DPBottomSheetSortingToggleSwitchClickOn",PRICE_SORT_TOGGLE_SWITCH_CLICK_OFF_METRIC:"DPBottomSheetSortingToggleSwitchClickOff",
PRICE_SORT_TOGGLE_SWITCH_ENABLED_STATUS_METRIC:"DPBottomSheetPriceSortingToggleSwitchEnabledStatus",PRIME_FILTER_TOGGLE_SWITCH_CLICK_ON_METRIC:"DPBottomSheetPrimeFilteringToggleSwitchClickOn",PRIME_FILTER_TOGGLE_SWITCH_CLICK_OFF_METRIC:"DPBottomSheetPrimeFilteringToggleSwitchClickOff",PRIME_FILTER_TOGGLE_SWITCH_ENABLED_STATUS_METRIC:"DPBottomSheetPrimeFilteringToggleSwitchEnabledStatus",SORTING_TYPE_PRICE:"price",SORTING_TYPE_UNSORTED:"unsorted",PREFETCH_AJAX_CALLS_COMPLETED_EVENT:"prefetchAjaxCallsCompleted",
TOGGLE_SWITCH_STATE_OFF:"off",TOGGLE_SWITCH_STATE_ON:"on",PRICE_SORTING_ENABLED_PARAMETER:"priceSortingEnabled",PRICE_SORTING_PRIORITY_NAME_PARAMETER:"priceSortingPriorityName",ALTER_TYPE_NAME_PRICE:"price",ALTER_TYPE_NAME_PRIME:"prime",ALTER_SUB_TYPE_ENABLE:"enable",ALTER_SUB_TYPE_DISABLE:"disable",ALTER_TYPE_SORT:"sort",ALTER_TYPE_FILTER:"filter",PRICE_SORT_TOGGLE_SWITCH_SELECTOR:".priceSortToggleSwitch",PRIME_FILTER_TOGGLE_SWITCH_SELECTOR:".primeFilterToggleSwitch",EXPERIMENT_PRICE_SORTING:"priceSorting",
EXPERIMENT_PRIME_FILTERING:"primeFiltering",ATTRIBUTE_PRICE_SORTING_PRIORITY:"priorityName",ATTRIBUTE_SORT_BY_PRICE_STRING:"sortByPriceString",ATTRIBUTE_SORTED_BY_PRICE_STRING:"sortedByPriceString",ATTRIBUTE_TOOL_NAME:"toolName",TOOL_TYPE_TOGGLE_SWITCH:"toggleSwitch"}}});m.when("A").register("page-refresh-custom-params-handler",function(e){var m={};return{initialize:function(){e.on("updateCustomPageRefreshParams",function(e,g,v){e&&g&&null!==v&&v!==p&&(m[e]||(m[e]={}),m[e][g]=v)})},getCustomPageRefreshParams:function(e){return m[e]||
{}}}});"use strict";m.when("A","a-sheet","jQuery","ready").execute(function(e,m,r){e.on("a:sheet:afterShow:bottom_sheet_mediaMatrix",function(){var e=r("#mediaMatrix_bottomSheet_view_div").find("#format-picker-scroller"),m=e.find("#selected-format"),q=m.offset().left,p=Math.abs(m.width()),m=Math.max(document.documentElement.clientWidth,w.innerWidth||0),p=m-p,x=e.scrollLeft();(q>p||0>=q)&&e.scrollLeft(x+q-m/3)})});m.when("A","view-util","twister-string-constants").register("hover-refresh-view",function(e,
w,r){var g=e.$;return function(v,q,A){function x(){e.each(q.contextMetaData,function(e,m){var k={};e=e.elementList||[];var g=e.length;k.mouseOver=[];for(var u=0;u<g;u++)e[u].customClientFunction&&e[u].updateOnHover&&k.mouseOver.push(e[u].divToUpdate);d.clientFeatures[m]=k})}function t(p,y){e.each(d.clientFeatures[y][r.EVENT_TYPE_MOUSEOVER],function(d){try{var e=g("#"+d),u;e.length&&(u=e.attr("customfunctionname"),function(){var d={};d.P=m;(function(){eval("var P \x3d this.P;");eval("0, "+u)(p,DetailPage.StateController)}).call(d)}())}catch(y){K.logFatal("Client feature - "+
feature+", threw and exception :- "+y)}})}function J(e){e=d.twisterUtil.getSelectionInfoFromSelectedVariationValuesMap(e.selected_variation_values);d.twisterUtil.isFullySelected(e)?d.currentPageSelectionState="full":d.currentPageSelectionState="partial"}var d=this,K=new A("dpTwisterHoverRefreshView");this.twisterUtil=v.util;this.twisterFeatureName="TwisterHover";this.currentPageSelectionState;this.clientFeatures={partial:{},full:{},parent:{},master:{}};d.viewUtil=new w(v);d.subType=p;(function(){function m(e){e=
d.viewUtil.getCurrDimCombId(e,"_","X");var k=d.twisterUtil.isFullySelected(e)?"full":"partial",g,p=d.currentPageSelectionState;"partial"===p&&"partial"===k&&(g="partial");"partial"===p&&"full"===k&&(g="full");"full"===p&&"partial"===k&&(g="parent");"full"===p&&"full"===k&&(g="full");k=[g];"parent"===g&&(k=["parent","partial"]);return{clientFeatureToRefresh:k,dimensionCombination:e}}J(q);x();v.registerPassive({viewAttribution:"DetailPageTwister",viewName:"WebTwisterHoverRefreshView"},{updateView:function(g,
k){switch(g){case r.VARIATION_PEEK:var q={};g=k.peek().selInfo;q=m(g);e.each(q.clientFeatureToRefresh,function(d){t(q.dimensionCombination,d)});case r.VARIATION_CHANGE:d.subType!==r.PRODUCTIZED_VIEW_SUBTYPE&&(g=k.selected().selInfo,k=d.viewUtil.getCurrDimCombId(g,"_","X"),d.currentPageSelectionState=d.twisterUtil.isFullySelected(k)?"full":"partial",d.subType=p);break;case r.METADATA:switch(k.subType){case r.PRODUCTIZED_VIEW_SUBTYPE:d.subType=k.subType,d.currentPageSelectionState=d.twisterUtil.isFullySelected(k.newDimCombID)?
"full":"partial"}}}})})()}})});